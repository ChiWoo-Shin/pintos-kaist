
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>FAQ Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../project3/introduction.html" />
    
    
    <link rel="prev" href="dup.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Introduction</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../introduction/getting_started.html">
            
                <a href="../introduction/getting_started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../introduction/grading.html">
            
                <a href="../introduction/grading.html">
            
                    
                    Grading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../introduction/legal_and_ethical_issues.html">
            
                <a href="../introduction/legal_and_ethical_issues.html">
            
                    
                    Legal and Ethical Issues
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Project1: Threads</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../project1/introduction.html">
            
                <a href="../project1/introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../project1/alarm_clock.html">
            
                <a href="../project1/alarm_clock.html">
            
                    
                    Alarm Clock
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../project1/priority_scheduling.html">
            
                <a href="../project1/priority_scheduling.html">
            
                    
                    Priority Scheduling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../project1/advanced_scheduler.html">
            
                <a href="../project1/advanced_scheduler.html">
            
                    
                    Advanced Scheduler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../project1/FAQ.html">
            
                <a href="../project1/FAQ.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Project2: User Programs</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="introduction.html">
            
                <a href="introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="argument_passing.html">
            
                <a href="argument_passing.html">
            
                    
                    Argument Passing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="user_memory.html">
            
                <a href="user_memory.html">
            
                    
                    User Memory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="system_call.html">
            
                <a href="system_call.html">
            
                    
                    System Calls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="process_termination.html">
            
                <a href="process_termination.html">
            
                    
                    Process Termination Messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="deny_write.html">
            
                <a href="deny_write.html">
            
                    
                    Denying Writes to Executables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="dup.html">
            
                <a href="dup.html">
            
                    
                    Extend File Descriptor (Extra)
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="3.8" data-path="FAQ.html">
            
                <a href="FAQ.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Project3: Virtual Memory</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../project3/introduction.html">
            
                <a href="../project3/introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../project3/vm_management.html">
            
                <a href="../project3/vm_management.html">
            
                    
                    Memory Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../project3/anon.html">
            
                <a href="../project3/anon.html">
            
                    
                    Anonymous Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../project3/stack_growth.html">
            
                <a href="../project3/stack_growth.html">
            
                    
                    Stack Growth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../project3/memory_mapped_files.html">
            
                <a href="../project3/memory_mapped_files.html">
            
                    
                    Memory Mapped Files
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="../project3/swapping.html">
            
                <a href="../project3/swapping.html">
            
                    
                    Swap In/Out
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="../project3/cow.html">
            
                <a href="../project3/cow.html">
            
                    
                    Copy-on-Write (Extra)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="../project3/FAQ.html">
            
                <a href="../project3/FAQ.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Project4: File System</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../project4/introduction.html">
            
                <a href="../project4/introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../project4/indexed_and_extensible_files.html">
            
                <a href="../project4/indexed_and_extensible_files.html">
            
                    
                    Indexed and Extensible Files
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../project4/subdirectories.html">
            
                <a href="../project4/subdirectories.html">
            
                    
                    Subdirectories and Soft Links
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="../project4/buffer_cache.html">
            
                <a href="../project4/buffer_cache.html">
            
                    
                    Buffer Cache (Extra)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="../project4/synchronization.html">
            
                <a href="../project4/synchronization.html">
            
                    
                    Synchronization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="../project4/FAQ.html">
            
                <a href="../project4/FAQ.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Appendix</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../appendix/threads.html">
            
                <a href="../appendix/threads.html">
            
                    
                    Threads
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="../appendix/synchronization.html">
            
                <a href="../appendix/synchronization.html">
            
                    
                    Synchronization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="../appendix/memory_allocation.html">
            
                <a href="../appendix/memory_allocation.html">
            
                    
                    Memory Allocation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="../appendix/virtual_address.html">
            
                <a href="../appendix/virtual_address.html">
            
                    
                    Virtual Address
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="../appendix/page_table.html">
            
                <a href="../appendix/page_table.html">
            
                    
                    Page Table
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="../appendix/debugging_tools.html">
            
                <a href="../appendix/debugging_tools.html">
            
                    
                    Debugging Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="../appendix/development_tools.html">
            
                <a href="../appendix/development_tools.html">
            
                    
                    Development Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="../appendix/hash_table.html">
            
                <a href="../appendix/hash_table.html">
            
                    
                    Hash Table
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >FAQ</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="faq">FAQ</h1>
<h3 id="how-much-code-will-i-need-to-write">How much code will I need to write?</h3>
<p>Here&apos;s a summary of our reference solution, produced by the <code>git diff --stat</code>.
The final row gives total lines inserted and deleted; a changed line counts as
both an insertion and a deletion.
The reference solution represents just one possible solution. Many other
solutions are also possible and many of those differ greatly from the reference
solution. Some excellent solutions may not modify all the files modified by the
reference solution, and some may modify files not modified by the reference
solution. Also, this includes implementation of extra requirement. FYI, ~150
lines are related to the extra.</p>
<pre><code>src/include/threads/thread.h   |  23 ++
src/include/userprog/syscall.h |   3 +
src/threads/thread.c           |   5 +
src/userprog/exception.c       |   4 +
src/userprog/process.c         | 355 +++++++++++++++++++++++++++++++++++++++++-
src/userprog/syscall.c         | 429 ++++++++++++++++++++++++++++++++++++++++++-
6 files changed, 782 insertions(+), 37 deletions(-)
</code></pre><h3 id="the-kernel-always-panics-when-i-run-pintos--p-file-----q">The kernel always panics when I run <code>pintos -p file -- -q</code>.</h3>
<p>Did you format the file system (with <code>pintos -f</code>)?</p>
<p>Is your file name too long? The file system limits file names to 14 characters.</p>
<p>A command like <code>pintos -p ../../examples/echo -- -q</code> will exceed the limit.</p>
<p>Use <code>pintos -p ../../examples/echo:echo -- -q</code> to put the file under the
name <code>echo</code> instead.</p>
<p>Is the file system full?</p>
<p>Does the file system already contain 16 files? The base Pintos file system has
a 16-file limit.</p>
<p>The file system may be so fragmented that there&apos;s not enough contiguous space
for your file.</p>
<h3 id="when-i-run-pintos--p-file----file-isnt-copied">When I run <code>pintos -p ../file --</code>, &apos;file&apos; isn&apos;t copied.</h3>
<p>Files are written under the name you refer to them, by default, so in this case
the file copied in would be named &apos;../file&apos;. You probably want to run <code>pintos
-p ../file:file --</code> instead.</p>
<h3 id="all-my-user-programs-die-with-page-faults">All my user programs die with page faults.</h3>
<p>This will happen if you haven&apos;t implemented argument passing (or haven&apos;t done
so correctly). The basic C library for user programs tries to read argv off the
stack. If the stack or registers aren&apos;t properly set up, this causes a
page fault.</p>
<h3 id="all-my-user-programs-die-with-system-call">All my user programs die with <code>system call!</code></h3>
<p>You&apos;ll have to implement system calls before you see anything else. Every
reasonable program tries to make at least one system call (<code>exit()</code>) and most
programs make more than that. Notably, <code>printf()</code> invokes the write system
call. The default system call handler just prints <code>system call!</code> and terminates
the program. Until then, you can use <code>hex_dump()</code> to convince yourself that
argument passing is implemented correctly.</p>
<h3 id="how-can-i-disassemble-user-programs">How can I disassemble user programs?</h3>
<p>The objdump utility can disassemble entire user programs or object files. Invoke
it as objdump -d file. You can use GDB&apos;s disassemble command to disassemble
individual functions.</p>
<h3 id="why-do-many-c-include-files-not-work-in-pintos-programs">Why do many C include files not work in Pintos programs?</h3>
<h3 id="can-i-use-libfoo-in-my-pintos-programs">Can I use libfoo in my Pintos programs?</h3>
<p>The C library we provide is very limited. It does not include many of the
features that are expected of a real operating system&apos;s C library. The C library
must be built specifically for the operating system (and architecture), since it
must make system calls for I/O and memory allocation. (Not all functions do,
of course, but usually the library is compiled as a unit.)</p>
<p>The chances are good that the library you want uses parts of the C library that
Pintos doesn&apos;t implement. It will probably take at least some porting effort to
make it work under Pintos. Notably, the Pintos user program C library does
not have a <code>malloc()</code> implementation.</p>
<h3 id="how-do-i-compile-new-user-programs">How do I compile new user programs?</h3>
<p>Modify <code>src/examples/Makefile</code>, then run <code>make</code>.</p>
<h3 id="can-i-run-user-programs-under-a-debugger">Can I run user programs under a debugger?</h3>
<p>Yes, with some limitations. See <a href="">GDB</a>.</p>
<h3 id="whats-the-difference-between-tidt-and-pidt">What&apos;s the difference between tid_t and pid_t?</h3>
<p>A tid_t identifies a kernel thread, which may have a user process running
in it (if created with <code>process_fork()</code>) or not (if created with
<code>thread_create()</code>). It is a data type used only in the kernel.
A pid_t identifies a user process. It is used by user processes and the kernel
in the exec and wait system calls. You can choose whatever suitable types you
like for tid_t and pid_t. By default, they&apos;re both int. You can make them a
one-to-one mapping, so that the same values in both identify the same process,
or you can use a more complex mapping. It&apos;s up to you.</p>
<h3 id="can-i-just-cast-a-struct-file--to-get-a-file-descriptor">Can I just cast a <code>struct file *</code> to get a file descriptor?</h3>
<h3 id="can-i-just-cast-a-struct-thread--to-a-pidt">Can I just cast a <code>struct thread *</code> to a <code>pid_t</code>?</h3>
<p>No. You can directly cast them since <code>pid_t</code> and <code>file descriptor</code> are smaller
than the pointer type.</p>
<h3 id="can-i-set-a-maximum-number-of-open-files-per-process">Can I set a maximum number of open files per process?</h3>
<p>It is better not to set an arbitrary limit. You may impose a limit of 128 open
files per process, if necessary. But if you want to implement extra
requirements, there should be no limitation.</p>
<h3 id="what-happens-when-an-open-file-is-removed">What happens when an open file is removed?</h3>
<p>You should implement the standard Unix semantics for files. That is, when a
file is removed any process which has a file descriptor for that file may
continue to use that descriptor. This means that they can read and write from
the file. The file will not have a name, and no other processes will be able to
open it, but it will continue to exist until all file descriptors referring to
the file are closed or the machine shuts down.</p>
<h3 id="how-can-i-run-user-programs-that-need-more-than-4-kb-stack-space">How can I run user programs that need more than 4 kB stack space?</h3>
<p>You may modify the stack setup code to allocate more than one page of stack
space for each process. In the next project, you will implement a better
solution.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="dup.html" class="navigation navigation-prev " aria-label="Previous page: Extend File Descriptor (Extra)">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../project3/introduction.html" class="navigation navigation-next " aria-label="Next page: Introduction">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"FAQ","level":"3.8","depth":1,"next":{"title":"Introduction","level":"4.1","depth":1,"path":"project3/introduction.md","ref":"project3/introduction.md","articles":[]},"previous":{"title":"Extend File Descriptor (Extra)","level":"3.7","depth":1,"path":"project2/dup.md","ref":"project2/dup.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"project2/FAQ.md","mtime":"2022-05-23T14:07:34.340Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-05-23T14:13:22.147Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

